{
  "version": 3,
  "sources": ["../../../app/routes/Home.tsx", "../../../app/style/BadgeCard.module.css"],
  "sourcesContent": ["// REMIX HMR BEGIN\nif (!window.$RefreshReg$ || !window.$RefreshSig$ || !window.$RefreshRuntime$) {\n  console.warn('remix:hmr: React Fast Refresh only works when the Remix compiler is running in development mode.');\n} else {\n  var prevRefreshReg = window.$RefreshReg$;\n  var prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = (type, id) => {\n    window.$RefreshRuntime$.register(type, \"\\\"app\\\\\\\\routes\\\\\\\\Home.tsx\\\"\" + id);\n  }\n  window.$RefreshSig$ = window.$RefreshRuntime$.createSignatureFunctionForTransform;\n}\nvar _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\n  import.meta.hot = __hmr__.createHotContext(\n  //@ts-expect-error\n  \"app\\\\routes\\\\Home.tsx\");\n}\n// REMIX HMR END\n\nimport React, { useEffect, useState } from \"react\";\nimport pb from \"../lib/pocketbase\";\nimport classes from \"~/style/BadgeCard.module.css\";\nimport { IconMapPin, IconCalendarEvent } from \"@tabler/icons-react\";\nimport { useNavigate } from \"react-router-dom\";\nfunction formatDate(dateStr) {\n  // Vytvo\u0159en\u00ED Date objektu z ISO \u0159et\u011Bzce\n  const date = new Date(dateStr);\n\n  // Nastaven\u00ED lokalizace a form\u00E1tu\n  const options = {\n    day: \"2-digit\",\n    month: \"2-digit\",\n    year: \"numeric\",\n    hour: \"2-digit\",\n    minute: \"2-digit\",\n    hour12: false\n  };\n\n  // Form\u00E1tov\u00E1n\u00ED data do po\u017Eadovan\u00E9ho form\u00E1tu\n  return date.toLocaleString(\"cs-CZ\", options).replace(\",\", \"\");\n}\nasync function getEvents() {\n  try {\n    const res = await fetch(\"http://127.0.0.1:8090/api/collections/events/records/\",\n    //`${process.env.DATABASE_URL_STRING}/api/collections/events/records/`,\n    {\n      cache: \"no-store\"\n    });\n    if (!res.ok) {\n      throw new Error(`Error: ${res.status}`);\n    }\n    const data = await res.json();\n    return data?.items || [];\n  } catch (error) {\n    console.error(\"Failed to fetch events:\", error);\n    return [];\n  }\n}\nexport default function Home() {\n  _s();\n  const [events, setEvents] = useState([]);\n  useEffect(() => {\n    getEvents().then(setEvents);\n  }, []);\n  return <div className={classes.home}>\r\n      {events.map(event => <EventCard key={event.id} event={event} />)}\r\n    </div>;\n}\n_s(Home, \"j18ueuia/psAZ/XawE3UyqzOWsE=\");\n_c = Home;\nexport function EventCard({\n  event\n}) {\n  _s2();\n  const imageUrl = `http://127.0.0.1:8090/api/files/${event.collectionId}/${event.id}/${event.image}`;\n  const shortDescription = event.description.length > 100 ? `${event.description.substring(0, 97)}...` : event.description;\n  const [dataUser, setDataUser] = useState(null);\n  const [eventUsers, setEventUsers] = useState({\n    users: []\n  });\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const response = await fetch(`http://127.0.0.1:8090/api/collections/users/records/${pb?.authStore?.model?.id}`);\n        if (!response.ok) {\n          throw new Error(\"Network response was not ok\");\n        }\n        const jsonData = await response.json();\n        setDataUser(jsonData);\n      } catch (error) {\n        console.error(\"There was a problem with the fetch operation:\", error);\n      }\n    };\n    if (pb.authStore.isValid) {\n      fetchData();\n    }\n  }, [pb?.authStore?.isValid]);\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const response = await fetch(`http://127.0.0.1:8090/api/collections/events/records/${event.id}`);\n        if (!response.ok) {\n          throw new Error(\"Network response was not ok\");\n        }\n        const jsonData = await response.json();\n        setEventUsers(jsonData);\n      } catch (error) {\n        console.error(\"There was a problem with the fetch operation:\", error);\n      }\n    };\n    fetchData();\n  }, []);\n  const data = {\n    users: [...eventUsers.users.filter(user => user !== dataUser?.id)]\n  };\n  const isUserInEvent = eventUsers.users.includes(dataUser?.id ?? '');\n  const handleJoinEvent = async eventId => {\n    // If the user is in the event, remove them\n    if (isUserInEvent) {\n      data.users = eventUsers.users.filter(user => user !== dataUser?.id);\n    }\n    // Otherwise, add them to the event\n    else {\n      data.users = [dataUser?.id ?? '', ...eventUsers.users];\n    }\n\n    // Update the event data\n    await pb.collection(\"events\").update(eventId, data);\n\n    // After updating, re-fetch the event users data\n    try {\n      const response = await fetch(`http://127.0.0.1:8090/api/collections/events/records/${eventId}`);\n      if (!response.ok) {\n        throw new Error(\"Network response was not ok\");\n      }\n      const jsonData = await response.json();\n      setEventUsers(jsonData); // Update the event users state\n    } catch (error) {\n      console.error(\"There was a problem with the fetch operation:\", error);\n    }\n  };\n  const navigate = useNavigate();\n  const handleAboutEvent = async eventId => {\n    navigate(`/app/event?id=${eventId}`);\n  };\n  return <div className={classes.card}>\r\n      <div className={classes.cardcontent}>\r\n        <div className={classes.imgcontainer}>\r\n          <img src={imageUrl} alt=\"Event Image\" className={classes.image} />\r\n        </div>\r\n        <div className={classes.info}>\r\n          <h1>{event.title}</h1>\r\n          <p>{shortDescription}</p>\r\n          <div className={classes.icontext}>\r\n            <IconMapPin /> {event.place}\r\n          </div>\r\n          <div className={classes.icontext}>\r\n            <IconCalendarEvent />\r\n            <p>\r\n              {formatDate(event.from_date)} - {formatDate(event.to_date)}\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className={classes.buttons}>\r\n        {isUserInEvent ? <button className={classes.buttonjoinNO} onClick={() => handleJoinEvent(event.id)}>\n          \r\n            U\u017E nem\u00E1m z\u00E1jem\r\n          </button> : <button className={classes.buttonjoin} onClick={() => handleJoinEvent(event.id)}>\n          \r\n            M\u00E1m z\u00E1jem\r\n          </button>}\n        \r\n        <button className={classes.buttonabout} onClick={() => handleAboutEvent(event.id)}>\n          \r\n          V\u00EDce informac\u00ED\r\n        </button>\r\n      </div>\r\n    </div>;\n}\n_s2(EventCard, \"xpgmLmtyP2hEi33tbarnNgkTX5Q=\", false, function () {\n  return [useNavigate];\n});\n_c2 = EventCard;\nvar _c, _c2;\n$RefreshReg$(_c, \"Home\");\n$RefreshReg$(_c2, \"EventCard\");\n\nwindow.$RefreshReg$ = prevRefreshReg;\nwindow.$RefreshSig$ = prevRefreshSig;", "export default {\"carde\":\"BadgeCard-module__carde__buOg-\",\"card\":\"BadgeCard-module__card__UAlFl\",\"imgcontainer\":\"BadgeCard-module__imgcontainer__Y3A3f\",\"image\":\"BadgeCard-module__image__7z1tM\",\"home\":\"BadgeCard-module__home__EwOV-\",\"icontext\":\"BadgeCard-module__icontext__nONYr\",\"info\":\"BadgeCard-module__info__3Nrbe\",\"buttonjoin\":\"BadgeCard-module__buttonjoin__S-Maq\",\"buttonabout\":\"BadgeCard-module__buttonabout__6jPDD\",\"buttonjoinNO\":\"BadgeCard-module__buttonjoinNO__vehDu\",\"buttons\":\"BadgeCard-module__buttons__vMIBz\",\"cardcontent\":\"BadgeCard-module__cardcontent__DRbdZ\"};"],
  "mappings": "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",
  "names": []
}
